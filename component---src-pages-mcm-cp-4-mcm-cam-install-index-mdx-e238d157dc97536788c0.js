(window.webpackJsonp=window.webpackJsonp||[]).push([[40],{"013z":function(e,t,a){"use strict";a("KKXr"),a("pIFo");var n=a("pOBw"),r=a("q1tI"),l=a.n(r),i=a("NmYn"),c=a.n(i),o=a("OKom"),b=a("k4MR"),s=a("TSYQ"),p=a.n(s),m=a("QH2O"),u=a("qKvR"),O=function(e){var t,a=e.title,n=e.tabs,r=void 0===n?[]:n;return Object(u.b)("div",{className:p()(m.pageHeader,(t={},t[m.withTabs]=r.length,t))},Object(u.b)("div",{className:"bx--grid"},Object(u.b)("div",{className:"bx--row"},Object(u.b)("div",{className:"bx--col-lg-12"},Object(u.b)("h1",{id:"page-title",className:m.text},a)))))},d=a("pEPl"),j=a("BAC9"),g=function(e){var t=e.relativePagePath,a=e.repository,n=d.data.site.siteMetadata.repository,r=a||n,l=r.baseUrl,i=r.subDirectory,c=l+"/edit/"+r.branch+i+"/src/pages"+t;return l?Object(u.b)("div",{className:"bx--row "+j.row},Object(u.b)("div",{className:"bx--col"},Object(u.b)("a",{className:j.link,href:c},"Edit this page on GitHub"))):null},N=a("FCXl"),h=(a("Oyvg"),a("Wbzz")),v=a("I8xM");var f=function(e){var t,a;function n(){return e.apply(this,arguments)||this}return a=e,(t=n).prototype=Object.create(a.prototype),t.prototype.constructor=t,t.__proto__=a,n.prototype.render=function(){var e=this.props,t=e.tabs,a=e.slug,n=a.split("/").filter(Boolean).slice(-1)[0],r=t.map((function(e){var t,r=c()(e,{lower:!0}),l=r===n,i=new RegExp(n+"(?!-)"),o=a.replace(i,r);return Object(u.b)("li",{key:e,className:p()((t={},t[v.selectedItem]=l,t),v.listItem)},Object(u.b)(h.Link,{className:v.link,to:""+o},e))}));return Object(u.b)("div",{className:v.tabsContainer},Object(u.b)("div",{className:"bx--grid"},Object(u.b)("div",{className:"bx--row"},Object(u.b)("div",{className:"bx--col-lg-12 bx--col-no-gutter"},Object(u.b)("nav",null,Object(u.b)("ul",{className:v.list},r))))))},n}(l.a.Component),y=a("MjG9");t.a=function(e){var t=e.pageContext,a=e.children,r=e.location,l=e.Title,i=t.frontmatter,s=void 0===i?{}:i,p=t.relativePagePath,m=t.titleType,d=s.tabs,j=s.title,h=s.theme,v=s.description,C=s.keywords,w=n.data.site.pathPrefix,_=w?r.pathname.replace(w,""):r.pathname,I=d?_.split("/").filter(Boolean).slice(-1)[0]||c()(d[0],{lower:!0}):"";return Object(u.b)(b.a,{tabs:d,homepage:!1,theme:h,pageTitle:j,pageDescription:v,pageKeywords:C,titleType:m},Object(u.b)(O,{title:l?Object(u.b)(l,null):j,label:"label",tabs:d}),d&&Object(u.b)(f,{slug:_,tabs:d,currentTab:I}),Object(u.b)(y.a,{padded:!0},a,Object(u.b)(g,{relativePagePath:p})),Object(u.b)(N.a,{pageContext:t,location:r,slug:_,tabs:d,currentTab:I}),Object(u.b)(o.a,null))}},PMMY:function(e,t,a){"use strict";a.r(t),a.d(t,"_frontmatter",(function(){return i})),a.d(t,"default",(function(){return b}));a("91GP"),a("rGqo"),a("yt8O"),a("Btvt"),a("RW0V"),a("q1tI");var n=a("7ljp"),r=a("013z");a("qKvR");function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}var i={},c={_frontmatter:i},o=r.a;function b(e){var t=e.components,a=function(e,t){if(null==e)return{};var a,n,r={},l=Object.keys(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,["components"]);return Object(n.b)(o,l({},c,a,{components:t,mdxType:"MDXLayout"}),Object(n.b)("ul",null,Object(n.b)("li",{parentName:"ul"},"{:toc}")),Object(n.b)("h2",null,"Overview"),Object(n.b)("h3",null,"Prerequisites"),Object(n.b)("ul",null,Object(n.b)("li",{parentName:"ul"},Object(n.b)("strong",{parentName:"li"},"OCP 4.0+")),Object(n.b)("li",{parentName:"ul"},Object(n.b)("strong",{parentName:"li"},"Install CLI Tools"),Object(n.b)("ul",{parentName:"li"},Object(n.b)("li",{parentName:"ul"},"Helm CLI"),Object(n.b)("li",{parentName:"ul"},"Kubernetes CLI"),Object(n.b)("li",{parentName:"ul"},"IBM Cloud Pak CLI")),Object(n.b)("pre",{parentName:"li"},Object(n.b)("code",l({parentName:"pre"},{}),"curl -kLo cloudctl https://icp-console.apps.res-cp4mcm.ocp.csplab.local/api/cli/cloudctl-darwin-amd64\n")),"For CLI install help, check out the Knowledge Center guides ",Object(n.b)("a",{href:"https://www.ibm.com/support/knowledgecenter/en/SSFC4F_1.2.0/cli/cli_guide_mcm.html"},"here"),".")),Object(n.b)("ul",null,Object(n.b)("li",{parentName:"ul"},Object(n.b)("a",l({parentName:"li"},{href:"/content/mcm/cp4mcm_mcm_install/"}),"Install MCM")),Object(n.b)("li",{parentName:"ul"},Object(n.b)("strong",{parentName:"li"},"Install Service Catalog")," (Required for OCP 4.0+. See install ",Object(n.b)("a",{href:"https://docs.openshift.com/container-platform/4.2/applications/service_brokers/installing-service-catalog.html"},"here"),")")),Object(n.b)("h2",null,"Online Installation"),Object(n.b)("h2",null,"Offline Installation"),Object(n.b)("p",null,Object(n.b)("strong",{parentName:"p"},"1.")," ",Object(n.b)("strong",{parentName:"p"},"Download the install file")," from Passport Advantage (PPA):"),Object(n.b)("table",null,Object(n.b)("thead",{parentName:"table"},Object(n.b)("tr",{parentName:"thead"},Object(n.b)("th",l({parentName:"tr"},{align:"center"}),"File Name"),Object(n.b)("th",l({parentName:"tr"},{align:"left"}),"Part Number"))),Object(n.b)("tbody",{parentName:"table"},Object(n.b)("tr",{parentName:"tbody"},Object(n.b)("td",l({parentName:"tr"},{align:"center"}),"icp-cam-x86_64-4.1.tar.gz"),Object(n.b)("td",l({parentName:"tr"},{align:"left"}),"CC4E1EN")))),Object(n.b)("p",null,Object(n.b)("strong",{parentName:"p"},"2.")," ",Object(n.b)("strong",{parentName:"p"},"Create SSC policy")),Object(n.b)("pre",null,Object(n.b)("code",l({parentName:"pre"},{}),"oc adm policy add-scc-to-user ibm-anyuid-hostpath-scc system:serviceaccount:services:default\n")),Object(n.b)("p",null,Object(n.b)("em",{parentName:"p"},"Note:")," Persistent volumes will be needed if you donâ€™t have dynamic storage. Visit ",Object(n.b)("a",{href:"https://www.ibm.com/support/knowledgecenter/SS2L37_4.1.0.0/cam_create_pv.html"},"here")," for more information."),Object(n.b)("p",null,Object(n.b)("strong",{parentName:"p"},"3.")," ",Object(n.b)("strong",{parentName:"p"},"Generate")," a deployment ",Object(n.b)("strong",{parentName:"p"},"ServiceID API Key")," using the following commands:"),Object(n.b)("pre",null,Object(n.b)("code",l({parentName:"pre"},{}),"export serviceIDName='service-deploy'\nexport serviceApiKeyName='service-deploy-api-key'\ncloudctl login -a <ibm_cloud_pak_mcm_console_url> --skip-ssl-validation -u <ibm_cloud_pak_mcm_admin_id> -p <ibm_cloud_pak_mcm_admin_password> -n services\ncloudctl iam service-id-create ${serviceIDName} -d 'Service ID for service-deploy'\ncloudctl iam service-policy-create ${serviceIDName} -r Administrator,ClusterAdministrator --service-name 'idmgmt'\ncloudctl iam service-policy-create ${serviceIDName} -r Administrator,ClusterAdministrator --service-name 'identity'\ncloudctl iam service-api-key-create ${serviceApiKeyName} ${serviceIDName} -d 'Api key for service-deploy'\n")),Object(n.b)("p",null,"The output with the API Key should look something like this: "),Object(n.b)("pre",null,Object(n.b)("code",l({parentName:"pre"},{}),"Name          service-deploy-api-key   \nDescription   Api key for service-deploy   \nBound To      crn:v1:icp:private:iam-identity:mycluster:n/services::serviceid:ServiceId-163c213a-37f5-4f8b-8a3c-2fd7b3887a4f   \nCreated At    2020-01-22T14:46+0000   \nAPI Key       <API KEY HERE>\n")),Object(n.b)("p",null,"Save the API Key for use during install configuration in Step 5b."),Object(n.b)("p",null,Object(n.b)("strong",{parentName:"p"},"4.")," ",Object(n.b)("strong",{parentName:"p"},"Load the PPA Archive")," (using cloudctl)"),Object(n.b)("p",null,Object(n.b)("strong",{parentName:"p"},"SSH into OpenShift")," cluster install box and run the following commands with admin access:"),Object(n.b)("pre",null,Object(n.b)("code",l({parentName:"pre"},{}),"HOST=$(oc get route default-route -n openshift-image-registry --template='{{ .spec.host }}')\ncloudctl login -a <ibm_cloud_pak_mcm_Console_Url> --skip-ssl-validation -u <ibm_cloud_pak_mcm_admin_ID> -p <ibm_cloud_pak_mcm_password> -n services\ndocker login -u <oc admin> -p $(oc whoami -t) $HOST\ncloudctl catalog load-archive --archive icp-cam-[x86-64 | ppc]-4.1.tar.gz --registry $HOST/services\n")),Object(n.b)("p",null,Object(n.b)("strong",{parentName:"p"},"5. Install CAM")),Object(n.b)("p",null,Object(n.b)("strong",{parentName:"p"},"5a. Sync CAM Helm Charts")),Object(n.b)("ol",null,Object(n.b)("li",{parentName:"ol"},"Login to MCM UI"),Object(n.b)("li",{parentName:"ol"},"Sync helm repositories"),Object(n.b)("li",{parentName:"ol"},"Go to ",Object(n.b)("strong",{parentName:"li"},"Administer")," > ",Object(n.b)("strong",{parentName:"li"},"Helm repository")),Object(n.b)("li",{parentName:"ol"},"Click ",Object(n.b)("strong",{parentName:"li"},"Sync All")," in the upper-right corner")),Object(n.b)("p",null,Object(n.b)("strong",{parentName:"p"},"5b. Configure and Install CAM")),Object(n.b)("ol",null,Object(n.b)("li",{parentName:"ol"},"In upper right-hand corner, click the ",Object(n.b)("strong",{parentName:"li"},"Catalog")," icon"),Object(n.b)("li",{parentName:"ol"},"Search for ",Object(n.b)("inlineCode",{parentName:"li"},"ibm-cam")," and click the chart from the ",Object(n.b)("inlineCode",{parentName:"li"},"local-helm")," repository  "),Object(n.b)("li",{parentName:"ol"},"Click ",Object(n.b)("strong",{parentName:"li"},"Configure")," in the bottom-right, or click the ",Object(n.b)("strong",{parentName:"li"},"Configuration")," tab"),Object(n.b)("li",{parentName:"ol"},"Enter the following install parameters:",Object(n.b)("ul",{parentName:"li"},Object(n.b)("li",{parentName:"ul"},"In the ",Object(n.b)("strong",{parentName:"li"},"Configuration")," section:",Object(n.b)("ul",{parentName:"li"},Object(n.b)("li",{parentName:"ul"},Object(n.b)("strong",{parentName:"li"},"Release name")," - Enter ",Object(n.b)("inlineCode",{parentName:"li"},"cam")," in release name."),Object(n.b)("li",{parentName:"ul"},Object(n.b)("strong",{parentName:"li"},"Target namespace")," - From the drop down list, select ",Object(n.b)("inlineCode",{parentName:"li"},"services"),"."))),Object(n.b)("li",{parentName:"ul"},"Select ",Object(n.b)("strong",{parentName:"li"},"I have read and agreed to license agreements")," to accept the license agreements."),Object(n.b)("li",{parentName:"ul"},"In the ",Object(n.b)("strong",{parentName:"li"},"Parameters")," > ",Object(n.b)("strong",{parentName:"li"},"All Parameters")," section:",Object(n.b)("ul",{parentName:"li"},Object(n.b)("li",{parentName:"ul"},Object(n.b)("strong",{parentName:"li"},"Worker node architecture")," - select amd64"),Object(n.b)("li",{parentName:"ul"},"Under ",Object(n.b)("strong",{parentName:"li"},"Global")," configuration values:",Object(n.b)("ul",{parentName:"li"},Object(n.b)("li",{parentName:"ul"},Object(n.b)("strong",{parentName:"li"},"Docker image pull secret"),Object(n.b)("ul",{parentName:"li"},Object(n.b)("li",{parentName:"ul"},"For offline installation, set to ",Object(n.b)("em",{parentName:"li"},"default")))),Object(n.b)("li",{parentName:"ul"},Object(n.b)("strong",{parentName:"li"},"Product Identifier")," - Enter ",Object(n.b)("inlineCode",{parentName:"li"},"IBMCloudAutomationManager_5737E67_4100_EE_000")),Object(n.b)("li",{parentName:"ul"},Object(n.b)("strong",{parentName:"li"},"IAM Service API Key")," - Enter the IAM service API Key you created earlier"),Object(n.b)("li",{parentName:"ul"},"Optionally, select ",Object(n.b)("strong",{parentName:"li"},"Optimize the installation for offline")," to optimize the installation for offline. For example, skip internet access to import public starter templates from github.com on the public internet during the installation."),Object(n.b)("li",{parentName:"ul"},"Optionally, select ",Object(n.b)("strong",{parentName:"li"},"Enable audit")," to enable the audit for actions in Cloud Automation Manager. It requires the management logging service to be installed. For installing the Cloud Automation Manager on IBM Multicloud Manager 3.2.1, select ",Object(n.b)("inlineCode",{parentName:"li"},"Enable legacy audit"),". For installing the Cloud Automation Manager on IBM Multicloud Manager 3.2.x or higher, select ",Object(n.b)("inlineCode",{parentName:"li"},"ICP32"),". For audit related installation parameters, see ",Object(n.b)("a",l({parentName:"li"},{href:"https://www.ibm.com/support/knowledgecenter/SS2L37_4.1.0.0/cam_installation_parameters.html?view=kc"}),"Installation parameters"),"."),Object(n.b)("li",{parentName:"ul"},"Optionally, select ",Object(n.b)("strong",{parentName:"li"},"Enable FIPS for CAM")," to enable FIPS."))),Object(n.b)("li",{parentName:"ul"},"Under ",Object(n.b)("strong",{parentName:"li"},"IBM Cloud Private")," > ",Object(n.b)("strong",{parentName:"li"},"Port"),", enter port value 443, or choose your own port"),Object(n.b)("li",{parentName:"ul"},"Under ",Object(n.b)("strong",{parentName:"li"},"Image"),", set Repository value to ",Object(n.b)("inlineCode",{parentName:"li"},"image-registry.openshift-image-registry.svc:5000/services/"),Object(n.b)("ul",{parentName:"li"},Object(n.b)("li",{parentName:"ul"},"Note: This image registry may vary depending on your cluster (??-JG)"))),Object(n.b)("li",{parentName:"ul"},"If using Dynamic Storage, Check ",Object(n.b)("strong",{parentName:"li"},"Enable Dynamic Provisioning")," and set your Storage Class Name. Repeat for each volume.")))))),Object(n.b)("p",null,Object(n.b)("strong",{parentName:"p"},"5. Confirm Installation")),Object(n.b)("p",null,"Monitor your install with "),Object(n.b)("pre",null,Object(n.b)("code",l({parentName:"pre"},{}),"watch oc get pods\n")),Object(n.b)("p",null,"   You should see something like this:"),Object(n.b)("img",{src:"/assets/img/cp4mcm/cam_install_pods.png",alt:"CAM Install Pods"}),Object(n.b)("p",null,"Once complete, access CAM in a browser using the url"),Object(n.b)("pre",null,Object(n.b)("code",l({parentName:"pre"},{}),"oc get routes\n")),Object(n.b)("h2",null,"Additional Resources"),Object(n.b)("ul",null,Object(n.b)("li",{parentName:"ul"},Object(n.b)("a",{href:"https://www.ibm.com/support/knowledgecenter/SS2L37_4.1.0.0/cam_prereq.html"},"Knowledge Center - CAM Prerequisites")),Object(n.b)("li",{parentName:"ul"},Object(n.b)("a",{href:"https://www.ibm.com/support/knowledgecenter/SS2L37_4.1.0.0/cam_install_offline_icpos.html"},"Knowledge Center - CAM Offline Installation Guide"))))}b.isMDXComponent=!0},pEPl:function(e){e.exports=JSON.parse('{"data":{"site":{"siteMetadata":{"repository":{"baseUrl":"https://ocp43.cloudpak8s.io","subDirectory":"/","branch":"master"}}}}}')},pOBw:function(e){e.exports=JSON.parse('{"data":{"site":{"pathPrefix":""}}}')}}]);
//# sourceMappingURL=component---src-pages-mcm-cp-4-mcm-cam-install-index-mdx-e238d157dc97536788c0.js.map